{
    "collab_server" : "",
    "contents" : "library(dplyr)\nlibrary(tidyr)\nlibrary(MetaCyto)\n\n# This example is a light weighted example of how to use MetaCyto to analyze data downloaded from \n# ImmPort. First, we collect fcs files from SDY736(flow cytometry data) and SDY420(CyTOF data). \n\n###################################################\n########## Check working directory first ##########\n###################################################\nwd=getwd()\nif(grepl(\"MetaCyto_Example_Meta_ImmPort$\",wd)==F){print(\"Please change the working directory to 'MetaCyto_Example'\")}\n\n\n################################################\n########## SDY736 FCM data collection ##########\n################################################\n\n# Read Meta-data from ImmPort\nmeta_data=read.table(\"Data/SDY736/SDY736-DR19_Subject_2_Flow_cytometry_result.txt\",sep='\\t',header=T)\n\n# Organize fcs file into panels\nfcs_info_SDY736=fcsInfoParser(metaData=meta_data,\n                       studyFolder=\"Data/SDY736\",\n                       fcsCol=\"FILE_NAME\",\n                       assay=\"FCM\")\n\n# Find the AGE, GENDER info from selected_data\nsample_info_SDY736=sampleInfoParser(metaData=meta_data,\n                             studyFolder=\"Data/SDY736\",\n                             assay=\"FCM\",\n                             fcsCol=\"FILE_NAME\",\n                             attrCol=c(\"SUBJECT_AGE\",\"GENDER\"))\n\n\n##################################################\n########## SDY420 CyTOF data collection ##########\n##################################################\n\nmeta_data=read.table(\"Data/SDY420/SDY420-DR19_Subject_2_CyTOF_result.txt\",sep='\\t',header=T)\n\nfcs_info_SDY420=fcsInfoParser(metaData=meta_data,\n                       studyFolder=\"Data/SDY420\",\n                       fcsCol=\"FILE_NAME\",\n                       assay=\"CyTOF\")\n\nsample_info_SDY420=sampleInfoParser(metaData=meta_data,\n                             studyFolder=\"Data/SDY420\",\n                             assay=\"CyTOF\",\n                             fcsCol=\"FILE_NAME\",\n                             attrCol=c(\"SUBJECT_AGE\",\"GENDER\"))\n\n#########################################################\n########## Combine Data from SDY420 and SDY736 ##########\n#########################################################\nsample_info=rbind(sample_info_SDY736,sample_info_SDY420)\nfcs_info=rbind(fcs_info_SDY736,fcs_info_SDY420)\ndir.create(\"Result\")\nwrite.csv(sample_info,\"Result/sample_info.csv\",row.names=F)\nwrite.csv(fcs_info,\"Result/fcs_info.csv\",row.names=F)\n\n#################################\n########## References ##########\n################################\n# Data used in the Example is a subset of data from SDY420[1] and SDY736[2] on ImmPort[3]. \n# \n# \n# [1] Whiting, Chan C., et al. \"Large-scale and comprehensive immune profiling and functional analysis of normal human aging.\" PloS one 10.7 (2015): e0133627.\n# \n# [2] Wertheimer, Anne M., et al. \"Aging and cytomegalovirus infection differentially and jointly affect distinct circulating T cell subsets in humans.\" The Journal of Immunology 192.5 (2014): 2143-2155.\n# \n# [3]Bhattacharya, Sanchita, et al. \"ImmPort: disseminating data to the public for the future of immunology.\" Immunologic research 58.2-3 (2014): 234-239.\n\n",
    "created" : 1487698976977.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1516958218",
    "id" : "8BAF547E",
    "lastKnownWriteTime" : 1487699659,
    "last_content_update" : 1487699659785,
    "path" : "~/Box Sync/MetaCyto_related/MetaCyto/MetaCyto_Example_Meta_ImmPort/Code/step1_data_collection.R",
    "project_path" : "Code/step1_data_collection.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}